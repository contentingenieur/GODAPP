---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
}

const { title, description = "A simple Bible study app for exploring Scripture" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#6B7B6E" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Bible Study" />
    <title>{title} | Bible Study</title>
  </head>
  <body>
    <slot />

    <footer class="esv-copyright">
      <p>Scripture quotations are from the ESV&reg; Bible (The Holy Bible, English Standard Version&reg;), copyright &copy; 2001 by Crossway, a publishing ministry of Good News Publishers. Used by permission. All rights reserved.</p>
    </footer>

    <script>
      // Register service worker for PWA
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js').catch(() => {
            // Service worker registration failed, but app still works
          });
        });
      }

      // Audience preference persistence
      const savedAudience = localStorage.getItem('selectedAudience');
      if (savedAudience) {
        document.documentElement.setAttribute('data-audience', savedAudience);
      }
    </script>
  </body>
</html>

<style>
  body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
</style>
